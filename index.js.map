{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// src/js/pixabay-api.js\nimport axios from 'axios';\n\nconst API_KEY = '52837655-6c21f27bf556d895abe6a0fd0';\nconst instance = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  timeout: 15000,\n});\n\n/**\n * @param {string} query\n * @returns {Promise<any>} data (–æ–±‚Äô—î–∫—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ Pixabay)\n */\nexport async function getImagesByQuery(query) {\n  const { data } = await instance.get('', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 40, \n    },\n  });\n  return data;\n}\n","\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryEl = document.getElementById('gallery');\nconst loaderEl = document.getElementById('loader');\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 200,\n});\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${escapeHtml(tags)}\" loading=\"lazy\" />\n        </a>\n        <div class=\"meta\">\n          <span>‚ù§ ${likes}</span>\n          <span>üëÅ ${views}</span>\n          <span>üí¨ ${comments}</span>\n          <span>‚¨á ${downloads}</span>\n        </div>\n      </li>`\n    )\n    .join('');\n\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh(); \n}\n\nexport function clearGallery() {\n  galleryEl.innerHTML = '';\n}\n\nexport function showLoader() {\n  loaderEl.classList.remove('is-hidden');\n  loaderEl.setAttribute('aria-hidden', 'false');\n}\n\nexport function hideLoader() {\n  loaderEl.classList.add('is-hidden');\n  loaderEl.setAttribute('aria-hidden', 'true');\n}\n\n\nfunction escapeHtml(str = '') {\n  return String(str)\n    .replaceAll('&', '&amp;')\n    .replaceAll('<', '&lt;')\n    .replaceAll('>', '&gt;')\n    .replaceAll('\"', '&quot;')\n    .replaceAll(\"'\", '&#039;');\n}\n","// src/main.js\nimport './css/styles.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader } from './js/render-functions.js';\n\nconst form = document.getElementById('search-form');\n\nform.addEventListener('submit', onSearch);\n\nasync function onSearch(e) {\n  e.preventDefault();\n\n  const query = form.elements['search-text'].value.trim();\n\n  if (!query) {\n    iziToast.error({\n      message: '–í–≤–µ–¥–∏ –ø–æ—à—É–∫–æ–≤–∏–π –∑–∞–ø–∏—Ç',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  showLoader();\n  clearGallery();\n\n  try {\n    const data = await getImagesByQuery(query);\n\n    if (!data.hits || data.hits.length === 0) {\n      iziToast.info({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    \n    createGallery(data.hits);\n  } catch (err) {\n    console.error(err);\n    iziToast.error({\n      message: '–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ. –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n"],"names":["API_KEY","instance","axios","getImagesByQuery","query","data","galleryEl","loaderEl","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","escapeHtml","clearGallery","showLoader","hideLoader","str","form","onSearch","e","iziToast","err"],"mappings":"owBAGA,MAAMA,EAAU,qCACVC,EAAWC,EAAM,OAAO,CAC5B,QAAS,2BACT,QAAS,IACX,CAAC,EAMM,eAAeC,EAAiBC,EAAO,CAC5C,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMJ,EAAS,IAAI,GAAI,CACtC,OAAQ,CACN,IAAKD,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,EACX,CACL,CAAG,EACD,OAAOC,CACT,CCrBA,MAAMC,EAAY,SAAS,eAAe,SAAS,EAC7CC,EAAW,SAAS,eAAe,QAAQ,EAG3CC,EAAW,IAAIC,EAAe,aAAc,CAChD,SAAU,GACV,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EACZ,IACC,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAO;AAAA;AAAA,mBAEjEL,CAAa;AAAA,sBACVD,CAAY,UAAUO,EAAWL,CAAI,CAAC;AAAA;AAAA;AAAA,oBAGxCC,CAAK;AAAA,qBACJC,CAAK;AAAA,qBACLC,CAAQ;AAAA,oBACTC,CAAS;AAAA;AAAA,YAGxB,EACA,KAAK,EAAE,EAEVb,EAAU,mBAAmB,YAAaM,CAAM,EAChDJ,EAAS,QAAO,CAClB,CAEO,SAASa,GAAe,CAC7Bf,EAAU,UAAY,EACxB,CAEO,SAASgB,GAAa,CAC3Bf,EAAS,UAAU,OAAO,WAAW,EACrCA,EAAS,aAAa,cAAe,OAAO,CAC9C,CAEO,SAASgB,GAAa,CAC3BhB,EAAS,UAAU,IAAI,WAAW,EAClCA,EAAS,aAAa,cAAe,MAAM,CAC7C,CAGA,SAASa,EAAWI,EAAM,GAAI,CAC5B,OAAO,OAAOA,CAAG,EACd,WAAW,IAAK,OAAO,EACvB,WAAW,IAAK,MAAM,EACtB,WAAW,IAAK,MAAM,EACtB,WAAW,IAAK,QAAQ,EACxB,WAAW,IAAK,QAAQ,CAC7B,CClDA,MAAMC,EAAO,SAAS,eAAe,aAAa,EAElDA,EAAK,iBAAiB,SAAUC,CAAQ,EAExC,eAAeA,EAASC,EAAG,CACzBA,EAAE,eAAc,EAEhB,MAAMvB,EAAQqB,EAAK,SAAS,aAAa,EAAE,MAAM,OAEjD,GAAI,CAACrB,EAAO,CACVwB,EAAS,MAAM,CACb,QAAS,wBACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDN,IACAD,IAEA,GAAI,CACF,MAAMhB,EAAO,MAAMF,EAAiBC,CAAK,EAEzC,GAAI,CAACC,EAAK,MAAQA,EAAK,KAAK,SAAW,EAAG,CACxCuB,EAAS,KAAK,CACZ,QAAS,2EACT,SAAU,UAClB,CAAO,EACD,MACD,CAGDlB,EAAcL,EAAK,IAAI,CACxB,OAAQwB,EAAK,CACZ,QAAQ,MAAMA,CAAG,EACjBD,EAAS,MAAM,CACb,QAAS,oDACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRL,GACD,CACH"}